                                    Services

- NodePort        - слушает внешний порт и отправляет запрос на внутренний
- ClusterIp       - создаёт виртуальный ip-адрес внутри кластера
- LoadBalancer    - предоставляет балансировщик нагрузки для сервера

=====================================================================================================

                                    NodePort

Имеет 3 порта для соединения из вне с подом:

        NodePort        ->        Port          ->        TargetPort   

     Начало запроса           Середина пути          Конечная цель запроса
     Слушающий порт            (в сервисе)               Целевой порт
    (30000 - 32767)        Сервис имеет свой IP    (в одном сервисе может быть 
                                                   несколько таргет портов)

В файле yaml данные для selector берутся из пода !!!
(selector -> labels)

Доступ к приложению с помощью браузера или : curl 192.168.1.2:30008

-----------------------------------------------------------------------------------------------------

- kubectl create -f service-definition.yaml                                   - создание файла сервиса
- kubectl get services                                                        - просмотр всех сервисов
- kubectl get service service_name -o jsonpath='{.spec.ports[*].targetPort}'  - узнать targetport сервиса
- kubectl get endpoints service_name                                          - узнать сколько Endpoints прикреплено к службе             
                                           

=====================================================================================================

                                    ClusterIp

  NAME         TYPE
kubernetes   ClusterIP        - эта служба запускается самим Kubernetes по умолчанию при запуске.

- kubectl create service clusterip service_name             - создать service типа clusterip
- kubectl expose pod redis --port=6379 --name redis-service - создать service redis-service для пода redis, 
                                                              выставив приложение redis внутри кластера на порту 6379

=====================================================================================================

                                   LoadBalancer

    LoadBalancer — тип сервиса в Kubernetes, который позволяет маршрутизировать трафик 
от пользователей внешнего мира к приложению, работающему внутри кластера. 
LoadBalancer действует как внешний интерфейс для приложения и распределяет нагрузку между его экземплярами (подами). 
Это помогает повысить отказоустойчивость и производительность.
    Встроенный балансировщик нагрузки в Kubernetes не предусмотрен — 
для полной балансировки нагрузки нужно использовать внешний балансировщик. 
На большинстве облачных провайдеров создание сервиса типа LoadBalancer автоматически создаёт балансировщик для сервиса.

    Кластер должен быть развёрнут в облаке, поддерживающем балансировку нагрузки 
(например, Google Cloud (GKE), Amazon Web Services (EKS), Microsoft Azure (AKS)).