Обратите внимание:

-  по аннотации @AutoConfigureTestDatabase Spring понимает, что перед запуском теста необходимо сконфигурировать тестовую БД вместо основной;
-  аннотация @SpringBootTest, которой помечается класс с тестами, говорит о том, что перед запуском этих тестов необходим запуск всего приложения;
-  аргумент аннотации @RequiredArgsConstructor указывает, что конструктор, созданный с помощью библиотеки Lombok,
    сможет получать зависимости через механизм @Autowired.

  Во время инициализации тестовой базы данных Spring прочитает SQL-запросы из стандартного файла schema.sql,
который вы собрали в начале задания, и выполнит их для текущей базы данных. Этот скрипт должен создать схему в тестовой БД.

@SpringBootTest
@AutoConfigureTestDatabase
@RequiredArgsConstructor(onConstructor_ = @Autowired)
@Sql({"/script.sql"})

class FilmorateApplicationTests {
.........
}


Я написал отдельный sql скрипт который сначала очищал бд и потом заполнял данными.
Каждому тесту добавил аннотацию @Sql({“/script.sql”}) и этот скрипт кинул в папку с ресурсами

я добавил аннотацию @Sql не в каждый тест, а указал у класса. тоже работает.

------------------------------------------------------------------------------------------------------------------
script.sql

DELETE FROM "USER_FILMORATE";
DELETE FROM "FILM";
ALTER TABLE "USER_FILMORATE"
	ALTER COLUMN "USER_ID" RESTART WITH 1;
ALTER TABLE "FILM"
	ALTER COLUMN "FILM_ID" RESTART WITH 1;

------------------------------------------------------------------------------------------------------------------
