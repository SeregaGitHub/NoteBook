pod_affinity         - под с такой меткой будет притягивать к себе поды с аналогичными метками

pod_anti_affinity    - под с такой меткой будет отталкивать от себя поды с аналогичными метками

=========================================================================================================

...
    affinity:                                                                  
      podAntiAffinity:                                                           
        requiredDuringSchedulingIgnoredDuringExecution:    
            - labelSelector:
                matchExpressions:                        
                  - key: app.kubernetes.io/name
                    operator: In                         
                    values:                                                     
                      - prodaction-ready
                topologyKey: kubernetes.io/hostname     

  При создании пода проверяются все ноды. Если есть ноды с меткой "app.kubernetes.io/name" со зачением "prodaction-ready" - 
то НЕ НАЗНАЧАТЬ туда этот под. Это строгое требование т.к. "requiredDuringScheduling". Если нет других нод - под подвиснет.

topologyKey - это ключ топологии, который позволяет управлять размещением подов внутри определённых узлов или регионов.
              можно, например, указать, что поды должны работать исключительно на определённых узлах в кластере или, 
              наоборот, не должны запускаться на конкретных узлах.                                                                            